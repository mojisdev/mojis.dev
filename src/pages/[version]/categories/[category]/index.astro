---
import PageLayout from "../../../../layouts/page-layout.astro";
import { generateVersionCategoryPaths } from "../../../../lib/query-builder";

export async function getStaticPaths() {
  // Generate version+category paths with a single function call
  return generateVersionCategoryPaths({
    includeCategories: true, // Include all categories for each version
    props: (category, version) => ({
      version: version.emoji_version,
      category // Pass the full category object as props
    })
  });
}

const { version, category } = Astro.props;
---

<PageLayout>
  <h1>Version: {version}</h1>
  <h2>Category: {category.name}</h2>

  <p>Subgroups in this category:</p>
  <ul>
    {category.subgroups.map((subgroup) => (
      <li>
        <a href={`/${version}/categories/${category.slug}/${subgroup}`}>
          {subgroup}
        </a>
      </li>
    ))}
  </ul>

  <div class="actions">
    <a href={`/${version}/categories`}>‚Üê Back to Categories</a>
  </div>
</PageLayout>
